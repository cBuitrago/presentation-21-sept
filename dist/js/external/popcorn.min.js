/*
 * popcorn.js version 1.5.6
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

!function(t,e){function n(t){m.put.call(this,t)}function a(t){this.parent=t,this.byStart=[{start:-1,end:-1}],this.byEnd=[{start:-1,end:-1}],this.animating=[],this.endIndex=this.startIndex=0,this.previousUpdateTime=-1,this.count=1}function i(t,e){return function(){if(g.plugin.debug)return t.apply(this,arguments);try{return t.apply(this,arguments)}catch(n){g.plugin.errors.push({plugin:e,thrown:n,source:t.toString()}),this.emit("pluginerror",g.plugin.errors)}}}if(e.addEventListener){var r=Array.prototype,s=Object.prototype,d=r.forEach,o=r.slice,u=s.hasOwnProperty,c=s.toString,l=t.Popcorn,p=[],f=!1,h={events:{hash:{},apis:{}}},v=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,16)}}(),m={put:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}},g=function(t,e){return new g.p.init(t,e||null)};g.version="1.5.6",g.isSupported=!0,g.instances=[],g.p=g.prototype={init:function(t,n){var i,r=this;if("function"!=typeof t){if("string"==typeof t)try{i=e.querySelector(t)}catch(s){throw Error("Popcorn.js Error: Invalid media element selector: "+t)}if(this.media=i||t,i=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[i]=this.media,this.options=g.extend({},n)||{},this.id=this.options.id||g.guid(i),g.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:g.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new a(this)},g.instances.push(this);var d=function(){r.media.currentTime<0&&(r.media.currentTime=0),r.media.removeEventListener("loadedmetadata",d,!1);var t,e,n,a,i;t=r.media.duration,t=t!=t?Number.MAX_VALUE:t+1,g.addTrackEvent(r,{start:t,end:t}),r.isDestroyed||(r.data.durationChange=function(){var t=r.media.duration,e=t+1,n=r.data.trackEvents.byStart,a=r.data.trackEvents.byEnd;n.pop(),a.pop();for(var i=a.length-1;i>0;i--)a[i].end>t&&r.removeTrackEvent(a[i]._id);for(a=0;a<n.length;a++)n[a].end>t&&r.removeTrackEvent(n[a]._id);r.data.trackEvents.byEnd.push({start:e,end:e}),r.data.trackEvents.byStart.push({start:e,end:e})},r.media.addEventListener("durationchange",r.data.durationChange,!1)),r.options.frameAnimation?(r.data.timeUpdate=function(){g.timeUpdate(r,{}),g.forEach(g.manifest,function(t,s){if(e=r.data.running[s]){a=e.length;for(var d=0;a>d;d++)n=e[d],(i=n._natives)&&i.frame&&i.frame.call(r,{},n,r.currentTime())}}),r.emit("timeupdate"),!r.isDestroyed&&v(r.data.timeUpdate)},!r.isDestroyed&&v(r.data.timeUpdate)):(r.data.timeUpdate=function(t){g.timeUpdate(r,t)},r.isDestroyed||r.media.addEventListener("timeupdate",r.data.timeUpdate,!1))};return r.media.addEventListener("error",function(){r.error=r.media.error},!1),r.media.readyState>=1?d():r.media.addEventListener("loadedmetadata",d,!1),this}if("complete"===e.readyState)t(e,g);else if(p.push(t),!f){f=!0;var o=function(){e.removeEventListener("DOMContentLoaded",o,!1);for(var t=0,n=p.length;n>t;t++)p[t].call(e,g);p=null};e.addEventListener("DOMContentLoaded",o,!1)}}},g.p.init.prototype=g.p,g.byId=function(t){for(var e=g.instances,n=e.length,a=0;n>a;a++)if(e[a].id===t)return e[a];return null},g.forEach=function(t,e,n){if(!t||!e)return{};n=n||this;var a,i;if(d&&t.forEach===d)return t.forEach(e,n);if("[object NodeList]"===c.call(t)){for(a=0,i=t.length;i>a;a++)e.call(n,t[a],a,t);return t}for(a in t)u.call(t,a)&&e.call(n,t[a],a,t);return t},g.extend=function(t){var e=o.call(arguments,1);return g.forEach(e,function(e){for(var n in e)t[n]=e[n]}),t},g.extend(g,{noConflict:function(e){return e&&(t.Popcorn=l),g},error:function(t){throw Error(t)},guid:function(t){return g.guid.counter++,(t?t:"")+(+new Date+g.guid.counter)},sizeOf:function(t){var e,n=0;for(e in t)n++;return n},isArray:Array.isArray||function(t){return"[object Array]"===c.call(t)},nop:function(){},position:function(n){if(!n.parentNode)return null;n=n.getBoundingClientRect();var a,i,r,s={},d=e.documentElement,o=e.body;a=d.clientTop||o.clientTop||0,i=d.clientLeft||o.clientLeft||0,r=t.pageYOffset&&d.scrollTop||o.scrollTop,d=t.pageXOffset&&d.scrollLeft||o.scrollLeft,a=Math.ceil(n.top+r-a),i=Math.ceil(n.left+d-i);for(var u in n)s[u]=Math.round(n[u]);return g.extend({},s,{top:a,left:i})},disable:function(t,e){if(!t.data.disabled[e]){if(t.data.disabled[e]=!0,e in g.registryByName&&t.data.running[e])for(var n,a=t.data.running[e].length-1;a>=0;a--)n=t.data.running[e][a],n._natives.end.call(t,null,n),t.emit("trackend",g.extend({},n,{plugin:n.type,type:"trackend"}));return t}},enable:function(t,e){if(t.data.disabled[e]){if(t.data.disabled[e]=!1,e in g.registryByName&&t.data.running[e])for(var n,a=t.data.running[e].length-1;a>=0;a--)n=t.data.running[e][a],n._natives.start.call(t,null,n),t.emit("trackstart",g.extend({},n,{plugin:n.type,type:"trackstart",track:n}));return t}},destroy:function(t){var e,n,a,i,r=t.data.events,s=t.data.trackEvents;for(n in r){e=r[n];for(a in e)delete e[a];r[n]=null}for(i in g.registryByName)g.removePlugin(t,i);s.byStart.length=0,s.byEnd.length=0,t.isDestroyed||(t.data.timeUpdate&&t.media.removeEventListener("timeupdate",t.data.timeUpdate,!1),t.isDestroyed=!0),g.instances.splice(g.instances.indexOf(t),1)}}),g.guid.counter=1,g.extend(g.p,function(){var t={};return g.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(e){t[e]=function(t){var n;return"function"==typeof this.media[e]?(null!=t&&/play|pause/.test(e)&&(this.media.currentTime=g.util.toSeconds(t)),this.media[e](),this):null!=t?(n=this.media[e],this.media[e]=t,n!==t&&this.emit("attrchange",{attribute:e,previousValue:n,currentValue:t}),this):this.media[e]}}),t}()),g.forEach("enable disable".split(" "),function(t){g.p[t]=function(e){return g[t](this,e)}}),g.extend(g.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(t,e,a){var i,r,s=arguments.length,d="trackadded";try{r=g.util.toSeconds(t)}catch(o){}if("number"==typeof r&&(t=r),"number"==typeof t&&2===s)a=e,e=t,t=g.guid("cue");else if(1===s)e=-1;else if(i=this.getTrackEvent(t))this.data.trackEvents.remove(t),n.end(this,i),g.removeTrackEvent.ref(this,t),d="cuechange","string"==typeof t&&2===s&&("number"==typeof e&&(a=i._natives.start),"function"==typeof e&&(a=e,e=i.start));else if(s>=2){if("string"==typeof e){try{r=g.util.toSeconds(e)}catch(u){}e=r}"number"==typeof e&&(a=a||g.nop()),"function"==typeof e&&(a=e,e=-1)}return s={id:t,start:e,end:e+1,_running:!1,_natives:{start:a||g.nop,end:g.nop,type:"cue"}},i&&(s=g.extend(i,s)),"cuechange"===d?(s._id=s.id||s._id||g.guid(s._natives.type),this.data.trackEvents.add(s),n.start(this,s),this.timeUpdate(this,null,!0),g.addTrackEvent.ref(this,s),this.emit(d,g.extend({},s,{id:t,type:d,previousValue:{time:i.start,fn:i._natives.start},currentValue:{time:e,fn:a||g.nop},track:i}))):g.addTrackEvent(this,s),this},mute:function(t){return t=null==t||t===!0?"muted":"unmuted","unmuted"===t&&(this.media.muted=!1,this.media.volume=this.data.state.volume),"muted"===t&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(t),this},unmute:function(t){return this.mute(null==t?!1:!t)},position:function(){return g.position(this.media)},toggle:function(t){return g[this.data.disabled[t]?"enable":"disable"](this,t)},defaults:function(t,e){return g.isArray(t)?(g.forEach(t,function(t){for(var e in t)this.defaults(e,t[e])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[t]||(this.options.defaults[t]={}),g.extend(this.options.defaults[t],e),this)}}),g.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},g.Events.Natives=g.Events.UIEvents+" "+g.Events.MouseEvents+" "+g.Events.Events,h.events.apiTypes=["UIEvents","MouseEvents","Events"],function(t,e){for(var n=h.events.apiTypes,a=t.Natives.split(/\s+/g),i=0,r=a.length;r>i;i++)e.hash[a[i]]=!0;n.forEach(function(n){e.apis[n]={};for(var a=t[n].split(/\s+/g),i=a.length,r=0;i>r;r++)e.apis[n][a[r]]=!0})}(g.Events,h.events),g.events={isNative:function(t){return!!h.events.hash[t]},getInterface:function(t){if(!g.events.isNative(t))return!1;var e=h.events,n=e.apiTypes;e=e.apis;for(var a,i,r=0,s=n.length;s>r;r++)if(i=n[r],e[i][t]){a=i;break}return a},all:g.Events.Natives.split(/\s+/g),fn:{trigger:function(n,a){var i,r=this.data.events[n];if(r){if(i=g.events.getInterface(n))return i=e.createEvent(i),i.initEvent(n,!0,!0,t,1),this.media.dispatchEvent(i),this;for(i=r.slice();i.length;)i.shift().call(this,a)}return this},listen:function(t,e){var n,a,i=this,r=!0,s=g.events.hooks[t];if("function"!=typeof e)throw Error("Popcorn.js Error: Listener is not a function");return this.data.events[t]||(this.data.events[t]=[],r=!1),s&&(s.add&&s.add.call(this,{},e),s.bind&&(t=s.bind),s.handler&&(a=e,e=function(t){s.handler.call(i,t,a)}),r=!0,this.data.events[t]||(this.data.events[t]=[],r=!1)),this.data.events[t].push(e),!r&&g.events.all.indexOf(t)>-1&&this.media.addEventListener(t,function(e){if(i.data.events[t])for(n=i.data.events[t].slice();n.length;)n.shift().call(i,e)},!1),this},unlisten:function(t,e){var n,a=this.data.events[t];if(a){if("string"==typeof e){for(n=0;n<a.length;n++)a[n].name===e&&a.splice(n--,1);return this}if("function"==typeof e){for(;-1!==n;)n=a.indexOf(e),-1!==n&&a.splice(n,1);return this}return this.data.events[t]=null,this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(t,e){var n=!1;this.media.readyState&&(setTimeout(function(){e.call(this,t)}.bind(this),0),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(t,e){this.data.hooks.canplayall.fired||(e.call(this,t),this.data.hooks.canplayall.fired=!0)}}}},g.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(t){g.p[t[0]]=g.p[t[1]]=g.events.fn[t[0]]}),n.start=function(t,e){e.end>t.media.currentTime&&e.start<=t.media.currentTime&&!e._running&&(e._running=!0,t.data.running[e._natives.type].push(e),t.data.disabled[e._natives.type]||(e._natives.start.call(t,null,e),t.emit("trackstart",g.extend({},e,{plugin:e._natives.type,type:"trackstart",track:e}))))},n.end=function(t,e){var n;(e.end<=t.media.currentTime||e.start>t.media.currentTime)&&e._running&&(n=t.data.running[e._natives.type],e._running=!1,n.splice(n.indexOf(e),1),t.data.disabled[e._natives.type]||(e._natives.end.call(t,null,e),t.emit("trackend",g.extend({},e,{plugin:e._natives.type,type:"trackend",track:e}))))},a.prototype.where=function(t){return(this.parent.getTrackEvents()||[]).filter(function(e){var n,a;if(!t)return!0;for(n in t)if(a=t[n],e[n]&&e[n]===a||e._natives[n]&&e._natives[n]===a)return!0;return!1})},a.prototype.add=function(t){var e,n=this.byStart,a=this.byEnd;for(t&&t._id&&this.parent.data.history.push(t._id),t.start=g.util.toSeconds(t.start,this.parent.options.framerate),t.end=g.util.toSeconds(t.end,this.parent.options.framerate),e=n.length-1;e>=0;e--)if(t.start>=n[e].start){n.splice(e+1,0,t);break}for(n=a.length-1;n>=0;n--)if(t.end>a[n].end){a.splice(n+1,0,t);break}e<=this.parent.data.trackEvents.startIndex&&t.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++,n<=this.parent.data.trackEvents.endIndex&&t.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++,this.count++},a.prototype.remove=function(t){if(t instanceof n&&(t=t.id),"object"==typeof t)return this.where(t).forEach(function(t){this.removeTrackEvent(t._id)},this.parent),this;var e,a,i;i=this.byStart.length;for(var r=0,s=0,d=[],o=[],u=[],c=[];--i>-1;)e=this.byStart[r],a=this.byEnd[r],e._id||(d.push(e),o.push(a)),e._id&&(e._id!==t&&d.push(e),a._id!==t&&o.push(a),e._id===t&&(s=r)),r++;if(i=this.animating.length,r=0,i)for(;--i>-1;)e=this.animating[r],e._id||u.push(e),e._id&&e._id!==t&&u.push(e),r++;for(s<=this.startIndex&&this.startIndex--,s<=this.endIndex&&this.endIndex--,this.byStart=d,this.byEnd=o,this.animating=u,this.count--,i=this.parent.data.history.length,r=0;i>r;r++)this.parent.data.history[r]!==t&&c.push(this.parent.data.history[r]);this.parent.data.history=c},g.addTrackEvent=function(t,e){var a;e instanceof n||((e=new n(e))&&e._natives&&e._natives.type&&t.options.defaults&&t.options.defaults[e._natives.type]&&(a=g.extend({},e),g.extend(e,t.options.defaults[e._natives.type],a)),e._natives&&(e._id=e.id||e._id||g.guid(e._natives.type),e._natives._setup&&(e._natives._setup.call(t,e),t.emit("tracksetup",g.extend({},e,{plugin:e._natives.type,type:"tracksetup",track:e})))),t.data.trackEvents.add(e),n.start(t,e),this.timeUpdate(t,null,!0),e._id&&g.addTrackEvent.ref(t,e),t.emit("trackadded",g.extend({},e,e._natives?{plugin:e._natives.type}:{},{type:"trackadded",track:e})))},g.addTrackEvent.ref=function(t,e){return t.data.trackRefs[e._id]=e,t},g.removeTrackEvent=function(t,e){var n=t.getTrackEvent(e);n&&(n._natives._teardown&&n._natives._teardown.call(t,n),t.data.trackEvents.remove(e),g.removeTrackEvent.ref(t,e),n._natives&&t.emit("trackremoved",g.extend({},n,{plugin:n._natives.type,type:"trackremoved",track:n})))},g.removeTrackEvent.ref=function(t,e){return delete t.data.trackRefs[e],t},g.getTrackEvents=function(t){var e=[];t=t.data.trackEvents.byStart;for(var n,a=t.length,i=0;a>i;i++)n=t[i],n._id&&e.push(n);return e},g.getTrackEvents.ref=function(t){return t.data.trackRefs},g.getTrackEvent=function(t,e){return t.data.trackRefs[e]},g.getTrackEvent.ref=function(t,e){return t.data.trackRefs[e]},g.getLastTrackEventId=function(t){return t.data.history[t.data.history.length-1]},g.timeUpdate=function(t,e){var n,a,i,r=t.media.currentTime,s=t.data.trackEvents.previousUpdateTime,d=t.data.trackEvents,o=d.endIndex,u=d.startIndex,c=d.byStart.length,l=d.byEnd.length,p=g.registryByName;if(r>=s){for(;d.byEnd[o]&&d.byEnd[o].end<=r;){if(n=d.byEnd[o],a=(s=n._natives)&&s.type,s&&!p[a]&&!t[a])return void g.removeTrackEvent(t,n._id);n._running===!0&&(n._running=!1,i=t.data.running[a],i.splice(i.indexOf(n),1),t.data.disabled[a]||(s.end.call(t,e,n),t.emit("trackend",g.extend({},n,{plugin:a,type:"trackend",track:n})))),o++}for(;d.byStart[u]&&d.byStart[u].start<=r;){if(n=d.byStart[u],a=(s=n._natives)&&s.type,s&&!p[a]&&!t[a])return void g.removeTrackEvent(t,n._id);n.end>r&&n._running===!1&&(n._running=!0,t.data.running[a].push(n),t.data.disabled[a]||(s.start.call(t,e,n),t.emit("trackstart",g.extend({},n,{plugin:a,type:"trackstart",track:n})))),u++}}else if(s>r){for(;d.byStart[u]&&d.byStart[u].start>r;){if(n=d.byStart[u],a=(s=n._natives)&&s.type,s&&!p[a]&&!t[a])return void g.removeTrackEvent(t,n._id);n._running===!0&&(n._running=!1,i=t.data.running[a],i.splice(i.indexOf(n),1),t.data.disabled[a]||(s.end.call(t,e,n),t.emit("trackend",g.extend({},n,{plugin:a,type:"trackend",track:n})))),u--}for(;d.byEnd[o]&&d.byEnd[o].end>r;){if(n=d.byEnd[o],a=(s=n._natives)&&s.type,s&&!p[a]&&!t[a])return void g.removeTrackEvent(t,n._id);n.start<=r&&n._running===!1&&(n._running=!0,t.data.running[a].push(n),t.data.disabled[a]||(s.start.call(t,e,n),t.emit("trackstart",g.extend({},n,{plugin:a,type:"trackstart",track:n})))),o--}}d.endIndex=o,d.startIndex=u,d.previousUpdateTime=r,d.byStart.length<c&&d.startIndex--,d.byEnd.length<l&&d.endIndex--},g.extend(g.p,{getTrackEvents:function(){return g.getTrackEvents.call(null,this)},getTrackEvent:function(t){return g.getTrackEvent.call(null,this,t)},getLastTrackEventId:function(){return g.getLastTrackEventId.call(null,this)},removeTrackEvent:function(t){return g.removeTrackEvent.call(null,this,t),this},removePlugin:function(t){return g.removePlugin.call(null,this,t),this},timeUpdate:function(t){return g.timeUpdate.call(null,this,t),this},destroy:function(){return g.destroy.call(null,this),this}}),g.manifest={},g.registry=[],g.registryByName={},g.plugin=function(t,e,a){if(!(g.protect.natives.indexOf(t.toLowerCase())>=0)){var r="function"==typeof e,s=["start","end","type","manifest"],d=["_setup","_teardown","start","end","frame"],c={},l=function(t,e){return t=t||g.nop,e=e||g.nop,function(){t.apply(this,arguments),e.apply(this,arguments)}};g.manifest[t]=a=a||e.manifest||{},d.forEach(function(n){e[n]=i(e[n]||g.nop,t)});var p=function(e,i){if(!i)return this;if(i.ranges&&g.isArray(i.ranges))return g.forEach(i.ranges,function(e){e=g.extend({},i,e),delete e.ranges,this[t](e)},this),this;var r,c=i._natives={},p="";return g.extend(c,e),i._natives.type=i._natives.plugin=t,i._running=!1,c.start=c.start||c["in"],c.end=c.end||c.out,i.once&&(c.end=l(c.end,function(){this.removeTrackEvent(i._id)})),c._teardown=l(function(){var t=o.call(arguments),e=this.data.running[c.type];t.unshift(null),t[1]._running&&e.splice(e.indexOf(i),1)&&c.end.apply(this,t),t[1]._running=!1,this.emit("trackend",g.extend({},i,{plugin:c.type,type:"trackend",track:g.getTrackEvent(this,i.id||i._id)}))},c._teardown),c._teardown=l(c._teardown,function(){this.emit("trackteardown",g.extend({},i,{plugin:t,type:"trackteardown",track:g.getTrackEvent(this,i.id||i._id)}))}),i.compose=i.compose||[],"string"==typeof i.compose&&(i.compose=i.compose.split(" ")),i.effect=i.effect||[],"string"==typeof i.effect&&(i.effect=i.effect.split(" ")),i.compose=i.compose.concat(i.effect),i.compose.forEach(function(t){p=g.compositions[t]||{},d.forEach(function(t){c[t]=l(c[t],p[t])})}),i._natives.manifest=a,"start"in i||(i.start=i["in"]||0),i.end||0===i.end||(i.end=i.out||Number.MAX_VALUE),u.call(i,"toString")||(i.toString=function(){var e=["start: "+i.start,"end: "+i.end,"id: "+(i.id||i._id)];return null!=i.target&&e.push("target: "+i.target),t+" ( "+e.join(", ")+" )"}),i.target||(r="options"in a&&a.options,i.target=r&&"target"in r&&r.target),!i._id&&i._natives&&(i._id=g.guid(i._natives.type)),i instanceof n?(i._natives&&(i._id=i.id||i._id||g.guid(i._natives.type),i._natives._setup&&(i._natives._setup.call(this,i),this.emit("tracksetup",g.extend({},i,{plugin:i._natives.type,type:"tracksetup",track:i})))),this.data.trackEvents.add(i),n.start(this,i),this.timeUpdate(this,null,!0),i._id&&g.addTrackEvent.ref(this,i)):g.addTrackEvent(this,i),g.forEach(e,function(t,e){-1===s.indexOf(e)&&this.on(e,t)},this),this};g.p[t]=c[t]=function(a,i){var s,d;if(a&&!i)i=a;else{if(s=this.getTrackEvent(a)){d=i;var o,c={};for(o in s)u.call(d,o)&&u.call(s,o)&&(c[o]=s[o]);return s._natives._update?(this.data.trackEvents.remove(s),u.call(i,"start")&&(s.start=i.start),u.call(i,"end")&&(s.end=i.end),n.end(this,s),r&&e.call(this,s),s._natives._update.call(this,s,i),this.data.trackEvents.add(s),n.start(this,s),"cue"!==s._natives.type&&this.emit("trackchange",{id:s.id,type:"trackchange",previousValue:c,currentValue:d,track:s}),this):(g.extend(s,i),this.data.trackEvents.remove(a),s._natives._teardown&&s._natives._teardown.call(this,s),g.removeTrackEvent.ref(this,a),r?p.call(this,e.call(this,s),s):(s._id=s.id||s._id||g.guid(s._natives.type),s._natives&&s._natives._setup&&(s._natives._setup.call(this,s),this.emit("tracksetup",g.extend({},s,{plugin:s._natives.type,type:"tracksetup",track:s}))),this.data.trackEvents.add(s),n.start(this,s),this.timeUpdate(this,null,!0),g.addTrackEvent.ref(this,s)),this.emit("trackchange",{id:s.id,type:"trackchange",previousValue:c,currentValue:s,track:s}),this)}i.id=a}return this.data.running[t]=this.data.running[t]||[],s=g.extend({},this.options.defaults&&this.options.defaults[t]||{},i),p.call(this,r?e.call(this,s):e,s),this},a&&g.extend(e,{manifest:a});var f={fn:c[t],definition:e,base:e,parents:[],name:t};return g.registry.push(g.extend(c,f,{type:t})),g.registryByName[t]=f,c}g.error("'"+t+"' is a protected function name")},g.plugin.errors=[],g.plugin.debug="1.5.6"===g.version,g.removePlugin=function(t,e){if(!e){if(e=t,t=g.p,g.protect.natives.indexOf(e.toLowerCase())>=0)return void g.error("'"+e+"' is a protected function name");var n,a=g.registry.length;for(n=0;a>n;n++)if(g.registry[n].name===e)return g.registry.splice(n,1),delete g.registryByName[e],delete g.manifest[e],void delete t[e]}a=t.data.trackEvents.byStart,n=t.data.trackEvents.byEnd;var i,r,s=t.data.trackEvents.animating;for(i=0,r=a.length;r>i;i++)a[i]&&a[i]._natives&&a[i]._natives.type===e&&(a[i]._natives._teardown&&a[i]._natives._teardown.call(t,a[i]),a.splice(i,1),i--,r--,t.data.trackEvents.startIndex<=i&&(t.data.trackEvents.startIndex--,t.data.trackEvents.endIndex--)),n[i]&&n[i]._natives&&n[i]._natives.type===e&&n.splice(i,1);for(i=0,r=s.length;r>i;i++)s[i]&&s[i]._natives&&s[i]._natives.type===e&&(s.splice(i,1),i--,r--)},g.compositions={},g.compose=function(t,e,n){g.manifest[t]=n||e.manifest||{},g.compositions[t]=e},g.plugin.effect=g.effect=g.compose;var y=/^(?:\.|#|\[)/;g.dom={debug:!1,find:function(t,n){var a=null;if(n=n||e,t){if(!y.test(t)&&(a=e.getElementById(t),null!==a))return a;try{a=n.querySelector(t)}catch(i){if(g.dom.debug)throw Error(i)}}return a}};var E=/\?/,k={ajax:null,url:"",data:"",dataType:"",success:g.nop,type:"GET",async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};g.xhr=function(t){if(t.dataType=t.dataType&&t.dataType.toLowerCase()||null,!t.dataType||"jsonp"!==t.dataType&&"script"!==t.dataType){if(t=g.extend({},k,t),t.ajax=new XMLHttpRequest,t.ajax)return"GET"===t.type&&t.data&&(t.url+=(E.test(t.url)?"&":"?")+t.data,t.data=null),t.ajax.open(t.type,t.url,t.async),"POST"===t.type&&t.ajax.setRequestHeader("Content-Type",t.contentType),t.ajax.send(t.data||null),g.xhr.httpData(t)}else g.xhr.getJSONP(t.url,t.success,"script"===t.dataType)},g.xhr.httpData=function(t){var e,n,a=null,i=null;return t.ajax.onreadystatechange=function(){if(4===t.ajax.readyState){try{a=JSON.parse(t.ajax.responseText)}catch(r){}if(e={xml:t.ajax.responseXML,text:t.ajax.responseText,json:a},!e.xml||!e.xml.documentElement){e.xml=null;try{n=new DOMParser,i=n.parseFromString(t.ajax.responseText,"text/xml"),i.getElementsByTagName("parsererror").length||(e.xml=i)}catch(s){}}t.dataType&&(e=e[t.dataType]),t.success.call(t.ajax,e)}},e},g.xhr.getJSONP=function(t,n,a){var i=e.head||e.getElementsByTagName("head")[0]||e.documentElement,r=e.createElement("script"),s=!1,d=[];d=/(=)\?(?=&|$)|\?\?/;var o,u;a||(u=t.match(/(callback=[^&]*)/),null!==u&&u.length?(d=u[1].split("=")[1],"?"===d&&(d="jsonp"),o=g.guid(d),t=t.replace(/(callback=[^&]*)/,"callback="+o)):(o=g.guid("jsonp"),d.test(t)&&(t=t.replace(d,"$1"+o)),d=t.split(/\?(.+)?/),t=d[0]+"?",d[1]&&(t+=d[1]+"&"),t+="callback="+o),window[o]=function(t){n&&n(t),s=!0}),r.addEventListener("load",function(){a&&n&&n(),s&&delete window[o],i.removeChild(r)},!1),r.addEventListener("error",function(t){n&&n({error:t}),a||delete window[o],i.removeChild(r)},!1),r.src=t,i.insertBefore(r,i.firstChild)},g.getJSONP=g.xhr.getJSONP,g.getScript=g.xhr.getScript=function(t,e){return g.xhr.getJSONP(t,e,!0)},g.util={toSeconds:function(t,e){var n,a,i,r=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/;return"number"==typeof t?t:("string"==typeof t&&!r.test(t)&&g.error("Invalid time format"),r=t.split(":"),n=r.length-1,a=r[n],a.indexOf(";")>-1&&(a=a.split(";"),i=0,e&&"number"==typeof e&&(i=parseFloat(a[1],10)/e),r[n]=parseInt(a[0],10)+i),n=r[0],{1:parseFloat(n,10),2:60*parseInt(n,10)+parseFloat(r[1],10),3:3600*parseInt(n,10)+60*parseInt(r[1],10)+parseFloat(r[2],10)}[r.length||1])}},g.p.cue=g.p.exec,g.protect={natives:function(t){return Object.keys?Object.keys(t):function(t){var e,n=[];for(e in t)u.call(t,e)&&n.push(e);return n}(t)}(g.p).map(function(t){return t.toLowerCase()})},g.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(t,e){var n=g.p[e];g.p[e]=function(){return"undefined"!=typeof console&&console.warn&&(console.warn("Deprecated method '"+e+"', "+(null==t?"do not use.":"use '"+t+"' instead.")),g.p[e]=n),g.p[t].apply(this,[].slice.call(arguments))}}),t.Popcorn=g}else for(t.Popcorn={isSupported:!1},r="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);r.length;)t.Popcorn[r.shift()]=function(){}}(window,window.document);